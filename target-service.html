<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒ“ã‚¹ - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒšãƒ¼ã‚¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .status-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .success {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4caf50;
        }

        .info {
            background: rgba(33, 150, 243, 0.3);
            border-color: #2196f3;
        }

        .warning {
            background: rgba(255, 193, 7, 0.3);
            border-color: #ffc107;
        }

        .server-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
        }

        .timestamp {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            opacity: 0.8;
        }

        code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ¯ ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒ“ã‚¹</h1>

        <div class="status-card success">
            <h2>âœ… ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒä¸­</h2>
            <p>ã“ã®ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒ­ãƒ¼ã‚«ãƒ«HTTPã‚µãƒ¼ãƒãƒ¼ãŒæ­£å¸¸ã«ç¨¼åƒã—ã¦ãŠã‚Šã€Microsoft Edgeã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ãƒãƒªã‚·ãƒ¼ãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã€ã‚¢ã‚¯ã‚»ã‚¹ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
        </div>

        <div class="status-card info">
            <h2>ğŸ“‹ ãƒ†ã‚¹ãƒˆç›®çš„</h2>
            <p>ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€<code>LocalNetworkAccessRestrictionsEnabled</code>ãƒãƒªã‚·ãƒ¼ã®å‹•ä½œæ¤œè¨¼ã‚’ç›®çš„ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
            <ul>
                <li><strong>ãƒãƒªã‚·ãƒ¼æœ‰åŠ¹æ™‚ï¼š</strong> ã“ã®ãƒšãƒ¼ã‚¸ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹</li>
                <li><strong>ãƒãƒªã‚·ãƒ¼ç„¡åŠ¹æ™‚ï¼š</strong> ã“ã®ãƒšãƒ¼ã‚¸ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹</li>
            </ul>
        </div>

        <div class="status-card warning">
            <h2>âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …</h2>
            <p>ã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯<strong>ãƒ†ã‚¹ãƒˆå°‚ç”¨</strong>ã§ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã¯å¿…ãšã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã—ã¦ãã ã•ã„ã€‚</p>
        </div>

        <div class="server-info">
            <div class="info-item">
                <h3>ğŸŒ ã‚µãƒ¼ãƒãƒ¼æƒ…å ±</h3>
                <p><strong>åå‰:</strong> Local Test Server</p>
                <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> 1.0.0</p>
                <p><strong>ãƒãƒ¼ãƒˆ:</strong> <span id="serverPort">8080</span></p>
            </div>

            <div class="info-item">
                <h3>ğŸ” ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±</h3>
                <p><strong>IP:</strong> <span id="clientIP">å–å¾—ä¸­...</span></p>
                <p><strong>User-Agent:</strong> <span id="userAgent">å–å¾—ä¸­...</span></p>
                <p><strong>è¨€èª:</strong> <span id="language">å–å¾—ä¸­...</span></p>
            </div>

            <div class="info-item">
                <h3>ğŸ“Š ã‚¢ã‚¯ã‚»ã‚¹çµ±è¨ˆ</h3>
                <p><strong>ã‚¢ã‚¯ã‚»ã‚¹æ™‚åˆ»:</strong> <span id="accessTime">å–å¾—ä¸­...</span></p>
                <p><strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³ID:</strong> <span id="sessionId">å–å¾—ä¸­...</span></p>
                <p><strong>ãƒªãƒ•ã‚¡ãƒ©ãƒ¼:</strong> <span id="referrer">å–å¾—ä¸­...</span></p>
            </div>

            <div class="info-item">
                <h3>ğŸ› ï¸ ãƒ†ã‚¹ãƒˆæ¨å¥¨äº‹é …</h3>
                <p><strong>1.</strong> DevToolsã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã‚’ç¢ºèª</p>
                <p><strong>2.</strong> ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼/è­¦å‘Šã‚’ç¢ºèª</p>
                <p><strong>3.</strong> è¤‡æ•°ã®ãƒãƒ¼ãƒˆã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</p>
            </div>
        </div>

        <div class="timestamp">
            æœ€çµ‚æ›´æ–°: <span id="lastUpdate"></span>
        </div>
    </div>

    <script>
        // ãƒšãƒ¼ã‚¸æƒ…å ±ã®å‹•çš„æ›´æ–°
        document.addEventListener('DOMContentLoaded', function () {
            updatePageInfo();
            setInterval(updatePageInfo, 5000); // 5ç§’ã”ã¨ã«æ›´æ–°
        });

        function updatePageInfo() {
            // ç¾åœ¨æ™‚åˆ»ã®æ›´æ–°
            const now = new Date();
            document.getElementById('lastUpdate').textContent = now.toLocaleString('ja-JP');
            document.getElementById('accessTime').textContent = now.toLocaleString('ja-JP');

            // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±ã®æ›´æ–°
            document.getElementById('userAgent').textContent = navigator.userAgent.substring(0, 50) + '...';
            document.getElementById('language').textContent = navigator.language;

            // ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã®ç”Ÿæˆï¼ˆç°¡æ˜“ç‰ˆï¼‰
            if (!sessionStorage.getItem('sessionId')) {
                sessionStorage.setItem('sessionId', generateSessionId());
            }
            document.getElementById('sessionId').textContent = sessionStorage.getItem('sessionId');

            // ãƒªãƒ•ã‚¡ãƒ©ãƒ¼ã®å–å¾—
            document.getElementById('referrer').textContent = document.referrer || 'ãªã—';

            // ãƒãƒ¼ãƒˆç•ªå·ã®æ¨æ¸¬
            const port = window.location.port || '80';
            document.getElementById('serverPort').textContent = port;

            // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIPã®å–å¾—ã‚’è©¦è¡Œ
            fetchClientIP();
        }

        function generateSessionId() {
            return 'sess_' + Math.random().toString(36).substr(2, 9);
        }

        async function fetchClientIP() {
            try {
                // ç°¡æ˜“çš„ãªIPå–å¾—ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®å¿œç­”ãŒå¿…è¦ï¼‰
                const response = await fetch('/api/clientinfo', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('clientIP').textContent = data.client_ip || 'localhost';
                } else {
                    document.getElementById('clientIP').textContent = 'localhost';
                }
            } catch (error) {
                document.getElementById('clientIP').textContent = 'localhost';
            }
        }

        // ãƒšãƒ¼ã‚¸ã®å¯è¦–æ€§å¤‰æ›´ã‚’ç›£è¦–
        document.addEventListener('visibilitychange', function () {
            if (!document.hidden) {
                updatePageInfo();
            }
        });
    </script>
</body>

</html>